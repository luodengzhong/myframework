<?xml version="1.0" encoding="UTF-8"?>
<domain>
	<entity name="ruTaskExtension" label="ruTaskExtension" table="ACT_RU_TASK_EXTENSION">
		<id column="ID_" name="id" type="java.lang.String" length="64"/>
		<property column="PREVIOUS_ID_" name="previousId" type="java.lang.String" length="64" required="false" label="前任务Id"/>
		<property column="CATALOG_ID_" name="catalogId" type="java.lang.String" length="32" required="false" label="任务的大类标识 process为流程任务，task为协同任务"/>
		<property column="KIND_ID_" name="kindId" type="java.lang.String" length="32" required="false" label="任务的类型细分标识，processInstance为流程实例，task为任务，executor为执行者"/>
		<property column="CREATOR_URL_" name="creatorUrl" type="java.lang.String" length="256" required="false" label="创建此任务的activity的URL"/>
		<property column="EXECUTOR_URL_" name="executorUrl" type="java.lang.String" length="256" required="false" label="处理此任务的activity的URL"/>
		<property column="CREATOR_PERSON_MEMBER_ID_" name="creatorPersonMemberId" type="java.lang.String" length="65" required="false" label="创建人ID"/>
		<property column="CREATOR_PERSON_MEMBER_NAME_" name="creatorPersonMemberName" type="java.lang.String" length="128" required="false" label="创建人"/>
		<property column="CREATOR_POS_ID_" name="creatorPosId" type="java.lang.String" length="65" required="false" label="创建人岗位ID"/>
		<property column="CREATOR_POS_NAME_" name="creatorPosName" type="java.lang.String" length="128" required="false" label="创建人岗位"/>
		<property column="CREATOR_DEPT_ID_" name="creatorDeptId" type="java.lang.String" length="65" required="false" label="创建人部门ID"/>
		<property column="CREATOR_DEPT_NAME_" name="creatorDeptName" type="java.lang.String" length="128" required="false" label="创建人部门"/>
		<property column="CREATOR_OGN_ID_" name="creatorOgnId" type="java.lang.String" length="65" required="false" label="创建人机构ID"/>
		<property column="CREATOR_OGN_NAME_" name="creatorOgnName" type="java.lang.String" length="128" required="false" label="创建人机构"/>
		<property column="CREATOR_FULL_ID_" name="creatorFullId" type="java.lang.String" length="1024" required="false" label="创建人ID全路径"/>
		<property column="CREATOR_FULL_NAME_" name="creatorFullName" type="java.lang.String" length="1024" required="false" label="创建人名称全路径"/>
		<property column="EXECUTOR_PERSON_MEMBER_ID_" name="executorPersonMemberId" type="java.lang.String" length="65" required="false" label="执行人ID"/>
		<property column="EXECUTOR_PERSON_MEMBER_NAME_" name="executorPersonMemberName" type="java.lang.String" length="128" required="false" label="执行人"/>
		<property column="EXECUTOR_POS_ID_" name="executorPosId" type="java.lang.String" length="65" required="false" label="执行人岗位ID"/>
		<property column="EXECUTOR_POS_NAME_" name="executorPosName" type="java.lang.String" length="128" required="false" label="执行人岗位"/>
		<property column="EXECUTOR_DEPT_ID_" name="executorDeptId" type="java.lang.String" length="65" required="false" label="执行人部门ID"/>
		<property column="EXECUTOR_DEPT_NAME_" name="executorDeptName" type="java.lang.String" length="128" required="false" label="执行人部门"/>
		<property column="EXECUTOR_OGN_ID_" name="executorOgnId" type="java.lang.String" length="65" required="false" label="执行人机构ID"/>
		<property column="EXECUTOR_OGN_NAME_" name="executorOgnName" type="java.lang.String" length="128" required="false" label="执行人机构"/>
		<property column="EXECUTOR_FULL_ID_" name="executorFullId" type="java.lang.String" length="1024" required="false" label="执行人ID全路径"/>
		<property column="EXECUTOR_FULL_NAME_" name="executorFullName" type="java.lang.String" length="1024" required="false" label="执行人名称全路径"/>
		<property column="STATUS_ID_" name="statusId" type="java.lang.String" length="32" required="false" label="任务状态ID ，取值范围是ready(尚未处理)，executing(正在处理)，sleeping(暂缓处理)，canceled(已取消)，aborted(已终止)，finished(已完成)，returned(已回退)，trainsmited(已转发)，paused(已暂停)"/>
		<property column="STATUS_NAME_" name="statusName" type="java.lang.String" length="64" required="false" label="任务状态"/>
		<property column="EXECUTOR_NAMES_" name="executorNames" type="java.lang.String" length="1024" required="false" label="执行人名称"/>
		<property column="OWNER_PERSON_MEMBER_ID_" name="ownerPersonMemberId" type="java.lang.String" length="65" required="false" label="责任人ID"/>
		<property column="OWNER_PERSON_MEMBER_NAME_" name="ownerPersonMemberName" type="java.lang.String" length="128" required="false" label="责任人"/>
		<property column="OWNER_POS_ID_" name="ownerPosId" type="java.lang.String" length="65" required="false" label="责任人岗位ID"/>
		<property column="OWNER_POS_NAME_" name="ownerPosName" type="java.lang.String" length="128" required="false" label="责任人岗位"/>
		<property column="OWNER_DEPT_ID_" name="ownerDeptId" type="java.lang.String" length="65" required="false" label="责任人部门ID"/>
		<property column="OWNER_DEPT_NAME_" name="ownerDeptName" type="java.lang.String" length="128" required="false" label="责任人部门"/>
		<property column="OWNER_OGN_ID_" name="ownerOgnId" type="java.lang.String" length="65" required="false" label="责任人机构ID"/>
		<property column="OWNER_OGN_NAME_" name="ownerOgnName" type="java.lang.String" length="128" required="false" label="责任人机构"/>
		<property column="OWNER_FULL_ID_" name="ownerFullId" type="java.lang.String" length="1024" required="false" label="责任人ID全路径"/>
		<property column="OWNER_FULL_NAME_" name="ownerFullName" type="java.lang.String" length="1024" required="false" label="责任人名称全路径"/>
		<property column="BUSINESS_KEY_" name="businessKey" type="java.lang.String" length="255" required="false" label="业务id"/>
		<property column="BUSINESS_CODE_" name="businessCode" type="java.lang.String" length="64" required="false" label="业务编码"/>
		<property column="PROC_UNIT_HANDLER_ID_" name="procUnitHandlerId" type="java.lang.Long" length="22" required="false" label="环节处理人id"/>
		<property column="NEED_TIMING_" name="needTiming" type="java.lang.Integer" length="22" required="false" label="是否计时"/>
		<property column="OPINION_" name="opinion" type="java.lang.String" length="512" required="false" label="处理意见"/>
		<property column="RESULT_" name="result" type="java.lang.Integer" required="false" label="处理结果"/>
		<sql name="updateRuTaskExtensionExecutorSql">
			update act_ru_task_extension t
			   set t.executor_full_id_ = ?, t.executor_full_name_ = ?,
			       t.executor_ogn_id_ = ?, t.executor_ogn_name_ = ?,
			       t.executor_dept_id_ = ?, t.executor_dept_name_ = ?,
			       t.executor_pos_id_ = ?, t.executor_pos_name_ = ?,
			       t.executor_person_member_id_ = ?, t.executor_person_member_name_ = ?
			 where t.id_ = ?	
		</sql>
		<sql name="selectRuProcTaskExtension">
			select *
			  from act_ru_task_extension t
			 where t.business_code_ = ?
			   and t.catalog_id_ = 'process'
			   and t.status_id_ = 'ready'
   	</sql>
   	<sql name="updateNeedTiming">
		 update act_ru_task_extension set need_timing_ = ? where id_ = ?
	</sql>
	</entity>
	<entity name="hiTaskinstExtension" label="历史任务实例扩展" table="ACT_HI_TASKINST_EXTENSION">
		<id column="ID_" name="id" type="java.lang.String" length="64"/>
		<property column="PREVIOUS_ID_" name="previousId" type="java.lang.String" length="64" required="false" label="前任务Id"/>
		<property column="CATALOG_ID_" name="catalogId" type="java.lang.String" length="32" required="false" label="任务的大类标识 process为流程任务，task为协同任务"/>
		<property column="KIND_ID_" name="kindId" type="java.lang.String" length="32" required="false" label="任务的类型细分标识，processInstance为流程实例，task为任务，executor为执行者"/>
		<property column="CREATOR_URL_" name="creatorUrl" type="java.lang.String" length="256" required="false" label="创建此任务的activity的URL"/>
		<property column="EXECUTOR_URL_" name="executorUrl" type="java.lang.String" length="256" required="false" label="处理此任务的activity的URL"/>
		<property column="CREATOR_PERSON_MEMBER_ID_" name="creatorPersonMemberId" type="java.lang.String" length="65" required="false" label="创建人ID"/>
		<property column="CREATOR_PERSON_MEMBER_NAME_" name="creatorPersonMemberName" type="java.lang.String" length="128" required="false" label="创建人"/>
		<property column="CREATOR_POS_ID_" name="creatorPosId" type="java.lang.String" length="65" required="false" label="创建人岗位ID"/>
		<property column="CREATOR_POS_NAME_" name="creatorPosName" type="java.lang.String" length="128" required="false" label="创建人岗位"/>
		<property column="CREATOR_DEPT_ID_" name="creatorDeptId" type="java.lang.String" length="65" required="false" label="创建人部门ID"/>
		<property column="CREATOR_DEPT_NAME_" name="creatorDeptName" type="java.lang.String" length="128" required="false" label="创建人部门"/>
		<property column="CREATOR_OGN_ID_" name="creatorOgnId" type="java.lang.String" length="65" required="false" label="创建人机构ID"/>
		<property column="CREATOR_OGN_NAME_" name="creatorOgnName" type="java.lang.String" length="128" required="false" label="创建人机构"/>
		<property column="CREATOR_FULL_ID_" name="creatorFullId" type="java.lang.String" length="1024" required="false" label="创建人ID全路径"/>
		<property column="CREATOR_FULL_NAME_" name="creatorFullName" type="java.lang.String" length="1024" required="false" label="创建人名称全路径"/>
		<property column="EXECUTOR_PERSON_MEMBER_ID_" name="executorPersonMemberId" type="java.lang.String" length="65" required="false" label="执行人ID"/>
		<property column="EXECUTOR_PERSON_MEMBER_NAME_" name="executorPersonMemberName" type="java.lang.String" length="128" required="false" label="执行人"/>
		<property column="EXECUTOR_POS_ID_" name="executorPosId" type="java.lang.String" length="65" required="false" label="执行人岗位ID"/>
		<property column="EXECUTOR_POS_NAME_" name="executorPosName" type="java.lang.String" length="128" required="false" label="执行人岗位"/>
		<property column="EXECUTOR_DEPT_ID_" name="executorDeptId" type="java.lang.String" length="65" required="false" label="执行人部门ID"/>
		<property column="EXECUTOR_DEPT_NAME_" name="executorDeptName" type="java.lang.String" length="128" required="false" label="执行人部门"/>
		<property column="EXECUTOR_OGN_ID_" name="executorOgnId" type="java.lang.String" length="65" required="false" label="执行人机构ID"/>
		<property column="EXECUTOR_OGN_NAME_" name="executorOgnName" type="java.lang.String" length="128" required="false" label="执行人机构"/>
		<property column="EXECUTOR_FULL_ID_" name="executorFullId" type="java.lang.String" length="1024" required="false" label="执行人ID全路径"/>
		<property column="EXECUTOR_FULL_NAME_" name="executorFullName" type="java.lang.String" length="1024" required="false" label="执行人名称全路径"/>
		<property column="STATUS_ID_" name="statusId" type="java.lang.String" length="32" required="false" label="任务状态ID"/>
		<property column="STATUS_NAME_" name="statusName" type="java.lang.String" length="64" required="false" label="任务状态"/>
		<property column="EXECUTOR_NAMES_" name="executorNames" type="java.lang.String" length="1024" required="false" label="执行人名称"/>
		<property column="OWNER_PERSON_MEMBER_ID_" name="ownerPersonMemberId" type="java.lang.String" length="65" required="false" label="责任人ID"/>
		<property column="OWNER_PERSON_MEMBER_NAME_" name="ownerPersonMemberName" type="java.lang.String" length="128" required="false" label="责任人"/>
		<property column="OWNER_POS_ID_" name="ownerPosId" type="java.lang.String" length="65" required="false" label="责任人岗位ID"/>
		<property column="OWNER_POS_NAME_" name="ownerPosName" type="java.lang.String" length="128" required="false" label="责任人岗位"/>
		<property column="OWNER_DEPT_ID_" name="ownerDeptId" type="java.lang.String" length="65" required="false" label="责任人部门ID"/>
		<property column="OWNER_DEPT_NAME_" name="ownerDeptName" type="java.lang.String" length="128" required="false" label="责任人部门"/>
		<property column="OWNER_OGN_ID_" name="ownerOgnId" type="java.lang.String" length="65" required="false" label="责任人机构ID"/>
		<property column="OWNER_OGN_NAME_" name="ownerOgnName" type="java.lang.String" length="128" required="false" label="责任人机构"/>
		<property column="OWNER_FULL_ID_" name="ownerFullId" type="java.lang.String" length="1024" required="false" label="责任人ID全路径"/>
		<property column="OWNER_FULL_NAME_" name="ownerFullName" type="java.lang.String" length="1024" required="false" label="责任人名称全路径"/>
		<property column="BUSINESS_KEY_" name="businessKey" type="java.lang.String" length="255" required="false" label="业务id"/>
		<property column="BUSINESS_CODE_" name="businessCode" type="java.lang.String" length="64" required="false" label="业务编码"/>
		<property column="PROC_UNIT_HANDLER_ID_" name="procUnitHandlerId" type="java.lang.Long" length="22" required="false" label="环节处理人id"/>
		<property column="NEED_TIMING_" name="needTiming" type="java.lang.Integer" length="22" required="false" label="是否计时"/>
		<property column="OPINION_" name="opinion" type="java.lang.String" length="512" required="false" label="处理意见"/>
		<property column="RESULT_" name="result" type="java.lang.Integer" required="false" label="处理结果"/>
		<property column="SIGN_PUNISH_" name="signPunish" type="java.lang.Long" length="22" required="false" label="人为标记是否处罚"/>
		<property column="SIGN_NEED_TIMING_" name="signNeedTiming" type="java.lang.Long" length="22" required="false" label="人为标记是否计时"/>
		<sql name="updateHiTaskInstExtensionExecutorSql">
			update act_hi_taskinst_extension t
			   set t.executor_full_id_ = ?, t.executor_full_name_ = ?,
			       t.executor_ogn_id_ = ?, t.executor_ogn_name_ = ?,
			       t.executor_dept_id_ = ?, t.executor_dept_name_ = ?,
			       t.executor_pos_id_ = ?, t.executor_pos_name_ = ?,
			       t.executor_person_member_id_ = ?, t.executor_person_member_name_ = ?
			 where t.task_id_ = ?				
		</sql>
		<!-- 选择申请人 -->
		<sql name="selectApplicantFullId">
			select executor_full_id
			  from (select te.executor_full_id_ as executor_full_id, rownum FIndex
			           from act_hi_taskinst_extension te, act_hi_taskinst t
			          where te.business_key_ = ?
			            and te.id_ = t.id_
			            and t.task_def_key_ = 'Apply'
			          order by t.id_ desc)
			 where FIndex = 1
		</sql>
		<sql name="selectRecentHiTaskInstExtensionByProcUnitHandlerId">
			select *
			  from act_hi_taskinst_extension a
			 where to_number(a.id_) =
			       (select max(to_number(id_))
			          from act_hi_taskinst_extension i
			         where i.proc_unit_handler_id_ = a.proc_unit_handler_id_)
			   and a.proc_unit_handler_id_ = ?
		</sql>
		<sql name="selectHiTaskInstExtensionByProcUnitHandlerId">
             select * from act_hi_taskinst_extension a where a.proc_unit_handler_id_ = ?
		</sql>
		<sql name = "updateStatus">
			update act_hi_taskinst_extension set status_id_ = ?,  status_name_ = ?  where id_ = ?
		</sql>
		<sql name="updateNeedTiming">
		    update act_hi_taskinst_extension  set  need_timing_ = ? where id_ = ?
		</sql>
	</entity>
	<entity name="ruTask" label="ruTask" table="ACT_RU_TASK">
		<property column="id" name="id" type="java.lang.String"/>
		<property column="proc_inst_id" name="procInstId" type="java.lang.String"/>
		<property column="proc_def_id" name="procDefId" type="java.lang.String"/>
		<property column="name" name="name" type="java.lang.String"/>
		<property column="process_definition_key" name="processDefinitionKey" type="java.lang.String"/>
		<property column="parent_task_id" name="parentTaskId" type="java.lang.String"/>
		<property column="description" name="description" type="java.lang.String"/>
		<property column="biz_Id" name="bizId" type="java.lang.String"/>
		<property column="biz_Id2" name="bizId2" type="java.lang.String"/>
		<property column="creator_ogn_name" name="creatorOgnName" type="java.lang.String"/>
		<property column="creator_dept_name" name="creatorDeptName" type="java.lang.String"/>
		<property column="task_def_key" name="taskDefKey" type="java.lang.String"/>
		<property column="owner" name="owner" type="java.lang.String"/>
		<property column="assignee" name="assignee" type="java.lang.String"/>
		<property column="delegation" name="delegation" type="java.lang.String"/>
		<property column="priority" name="priority" type="java.lang.Integer"/>
		<property column="start_time" name="startTime" type="java.util.Date"/>
		<property column="end_time" name="endTime" type="java.util.Date"/>
		<property column="due_date" name="dueDate" type="java.util.Date"/>
		<property column="suspension_state" name="suspensionState" type="java.lang.String"/>
		<property column="catalog_id" name="catalogId" type="java.lang.String"/>
		<property column="kind_id" name="kindid" type="java.lang.String"/>
		<property column="creator_url" name="creatorUrl" type="java.lang.String"/>
		<property column="executor_url" name="executorUrl" type="java.lang.String"/>
		<property column="creator_person_member_name" name="creatorPersonMemberName" type="java.lang.String"/>
		<property column="executor_names" name="executorNames" type="java.lang.String"/>
		<property column="status_id" name="statusId" type="java.lang.String"/>
		<property column="status_name" name="statusName" type="java.lang.String"/>
		<property column="PROC_UNIT_HANDLER_ID_" name="procUnitHandlerId" type="java.lang.Long" length="22" required="false" label="环节处理人id"/>
		<sql name="selectRuntimeTask">
			select t.id_ id, pi.proc_inst_id_ proc_inst_id, pi.proc_def_id_ proc_def_id,
			       name_ name, pi.process_definition_key_ process_definition_key,
			       parent_task_id_ parent_task_id, t.description_ description,
			       t.creator_ogn_name_ creator_ogn_name,
			       t.creator_dept_name_ creator_dept_name, t.task_def_key_ task_def_key,
			       t.owner_ owner, t.assignee_ assignee, t.delegation_ delegation,
			       t.priority_ priority, t.create_time_ start_time, '' end_time,
			       t.due_date_ due_date, t.suspension_state_ suspension_state,
			       t.kind_id_ kind_id, t.creator_url_ creator_url,
			       t.executor_url_ executor_url,
			       t.creator_person_member_name_ creator_person_member_name,
			       t.creator_full_id_ creator_full_id,
			       t.executor_full_id_ executor_full_id,
			       t.executor_person_member_name_ executor_person_member_name,
			       t.executor_names_ executor_names, t.status_id_ status_id,
			       t.status_name_ status_name, t.catalog_id_ catalog_id,
			       t.previous_id_ previous_id, t.business_key_ as biz_Id,
			       t.business_code_ as biz_code,
			       t.proc_unit_handler_id_ proc_unit_handler_id,
			       pi.start_time_ proc_inst_start_time, pi.end_time_ proc_inst_end_time,
			       pi.applicant_person_member_id_ applicant_person_member_id,
			       pi.applicant_person_member_name_ applicant_person_member_name,
			       pi.applicant_dept_name_ applicant_dept_name,
			       pi.applicant_ogn_name_ applicant_ogn_name,
			       pi.proc_sys_name
			  from v_act_ru_task t
			  left join v_act_hi_procinst pi
			    on t.proc_inst_id_ = pi.proc_inst_id_	
			 where 1 = 1    		
		</sql>
		<sql name="selectRuntimeTaskDetail">
			select t.id_ id, proc_inst_id_ proc_inst_id, proc_def_id_ proc_def_id,
			             name_ name,
			            (select p.key_ from act_re_procdef p where p.id_ = t.proc_def_id_) process_definition_key,
			             parent_task_id_ parent_task_id, description_ description,
			             te.creator_ogn_name_ creator_ogn_name,
			             te.creator_dept_name_ creator_dept_name, t.task_def_key_ task_def_key,
			             t.owner_ owner, t.assignee_ assignee, t.delegation_ delegation,
			             t.priority_ priority, t.create_time_ start_time, '' end_time,
			             t.due_date_ due_date, t.suspension_state_ suspension_state,
			             te.kind_id_ kind_id, te.creator_url_ creator_url,
			             te.executor_url_ executor_url,
			             te.creator_person_member_name_ creator_person_member_name,
			             te.creator_full_id_ creator_full_id,
			             te.executor_full_id_ executor_full_id,
			             te.executor_names_ executor_names, te.status_id_ status_id,
			             te.status_name_ status_name, te.catalog_id_ catalog_id,
			             te.executor_person_member_name_ executor_person_member_name,
			             te.previous_id_ previous_id, te.business_key_ as biz_Id, te.business_code_ as biz_code, te.PROC_UNIT_HANDLER_ID_ as proc_unit_handler_id
			        from act_ru_task t, act_ru_task_extension te
			       where t.id_ = te.id_
			         and t.id_ = ?
			         and te.id_ = ?		
		</sql>
		<sql name="selectRuntimeTaskByPreviousId">
			select t.id_
			  from act_ru_task t, act_ru_task_extension te
			 where t.id_ = te.id_
			   and t.proc_inst_id_ = ?
			   and te.previous_id_ = ?
		</sql>
		<sql name="selectRuntimeExecutorsByExecutionId">
			select te.executor_full_id_ full_id, te.executor_full_name_ full_name
			  from act_ru_task t, act_ru_task_extension te
			 where t.id_ = te.id_
			   and t.execution_id_ = ?
		</sql>
		<sql name="selectRuntimeTaskForApp">
			select t.id_ id, t.proc_inst_id_ proc_inst_id, proc_def_id_ proc_def_id,
			       name_ name, p.key as process_definition_key, am.model_type,
			       parent_task_id_ parent_task_id, description_ description,
			       t.task_def_key_ task_def_key, t.priority_ priority,
			       t.create_time_ start_time, te.kind_id_ kind_id,
			       te.creator_person_member_name_ creator_person_member_name,
			       te.executor_person_member_name_ executor_person_member_name,
			       te.executor_url_ executor_url, te.status_id_ status_id,
			       te.status_name_ status_name, te.catalog_id_ catalog_id,
			       te.previous_id_ previous_id, te.business_key_ as biz_Id,
			       te.business_code_ as biz_code,
			       te.proc_unit_handler_id_ as proc_unit_handler_id, ph.approval_rule_id,
			       pie.applicant_person_member_id_ applicant_person_member_id,
			       pie.applicant_person_member_name_ applicant_person_member_name,
			       pie.applicant_dept_name_ applicant_dept_name,
			       pie.applicant_ogn_name_ applicant_ogn_name
			  from act_ru_task t
			  left join act_hi_procinst_extension pie
			    on t.proc_inst_id_ = pie.id_
			  left join act_re_procdef_tree p
			    on substr(t.proc_def_id_, 1, instr(t.proc_def_id_, ':') - 1) = p.key
			   and t.task_def_key_ = p.code
			  left join App_Model am
			    on p.app_model_id = am.app_model_id, act_ru_task_extension te
			  left join wf_procunithandler ph
			    on te.proc_unit_handler_id_ = ph.id
			 where t.id_ = te.id_	
		</sql>
	</entity>
	<entity name="hiTaskinst" label="hiTaskinst" table="ACT_HI_TASKINST">
		<property column="id" name="id" type="java.lang.String"/>
		<property column="proc_inst_id" name="procInstId" type="java.lang.String"/>
		<property column="proc_def_id" name="procDefId" type="java.lang.String"/>
		<property column="name" name="name" type="java.lang.String"/>
		<property column="process_definition_key" name="processDefinitionKey" type="java.lang.String"/>
		<property column="parent_task_id" name="parentTaskId" type="java.lang.String"/>
		<property column="description" name="description" type="java.lang.String"/>
		<property column="biz_Id" name="bizId" type="java.lang.String"/>
		<property column="biz_Id2" name="bizId2" type="java.lang.String"/>
		<property column="creator_ogn_name" name="creatorOgnName" type="java.lang.String"/>
		<property column="creator_dept_name" name="creatorDeptName" type="java.lang.String"/>
		<property column="task_def_key" name="taskDefKey" type="java.lang.String"/>
		<property column="owner" name="owner" type="java.lang.String"/>
		<property column="assignee" name="assignee" type="java.lang.String"/>
		<property column="delegation" name="delegation" type="java.lang.String"/>
		<property column="priority" name="priority" type="java.lang.Integer"/>
		<property column="start_time" name="startTime" type="java.util.Date"/>
		<property column="end_time" name="endTime" type="java.util.Date"/>
		<property column="due_date" name="dueDate" type="java.util.Date"/>
		<property column="suspension_state" name="suspensionState" type="java.lang.String"/>
		<property column="catalog_id" name="catalogId" type="java.lang.String"/>
		<property column="kind_id" name="kindid" type="java.lang.String"/>
		<property column="creator_url" name="creatorUrl" type="java.lang.String"/>
		<property column="executor_url" name="executorUrl" type="java.lang.String"/>
		<property column="creator_person_member_name" name="creatorPersonMemberName" type="java.lang.String"/>
		<property column="executor_names" name="executorNames" type="java.lang.String"/>
		<property column="status_id" name="statusId" type="java.lang.String"/>
		<property column="status_name" name="statusName" type="java.lang.String"/>
		<property column="proc_unit_handler_id_" name="procUnitHandlerId" type="java.lang.Long" length="22" required="false" label="环节处理人id"/>
		<sql name="selectHistoricTask">
			select t.id_ id, pi.proc_inst_id_ proc_inst_id, pi.proc_def_id_ proc_def_id,
			       name_ name, pi.process_definition_key_ process_definition_key,
			       parent_task_id_ parent_task_id, description_ description,
			       t.creator_ogn_name_ creator_ogn_name,
			       t.creator_dept_name_ creator_dept_name, t.task_def_key_ task_def_key,
			       t.owner_ owner, t.assignee_ assignee, t.priority_ priority,
			       t.start_time_ start_time, t.end_time_ end_time, t.due_date_ due_date,
			       '' suspension_state, t.kind_id_ kind_id, t.creator_url_ creator_url,
			       t.executor_url_ executor_url, '' delegation,
			       t.creator_person_member_name_ creator_person_member_name,
			       t.creator_full_id_ creator_full_id,
			       t.executor_full_id_ executor_full_id,
			       t.executor_names_ executor_names, t.status_id_ status_id,
			       t.status_name_ status_name, t.catalog_id_ catalog_id,
			       t.executor_person_member_name_ executor_person_member_name,
			       t.previous_id_ previous_id, t.business_key_ as biz_Id,
			       t.business_code_ as biz_code,
			       t.proc_unit_handler_id_ as proc_unit_handler_id,
			       pi.start_time_ proc_inst_start_time, pi.end_time_ proc_inst_end_time,
			       pi.applicant_person_member_id_ applicant_person_member_id,
			       pi.applicant_person_member_name_ applicant_person_member_name,
			       pi.applicant_dept_name_ applicant_dept_name,
			       pi.applicant_ogn_name_ applicant_ogn_name,
			       pi.proc_sys_name
			  from v_act_hi_task t
			  left join v_act_hi_procinst pi
			    on t.proc_inst_id_ = pi.proc_inst_id_
			 where 1 = 1 
		</sql>
		<sql name="selectHistoricTaskDetail">
			select t.id_ id, proc_inst_id_ proc_inst_id, proc_def_id_ proc_def_id,
			       name_ name,
			       (select p.key_ from act_re_procdef p where p.id_ = t.proc_def_id_) process_definition_key,
			       parent_task_id_ parent_task_id, description_ description,
			       te.creator_ogn_name_ creator_ogn_name,
			       te.creator_dept_name_ creator_dept_name, t.task_def_key_ task_def_key,
			       t.owner_ owner, t.assignee_ assignee, t.priority_ priority,
			       t.start_time_ start_time, t.end_time_ end_time, t.due_date_ due_date,
			       '' suspension_state, te.kind_id_ kind_id, te.creator_url_ creator_url,
			       te.executor_url_ executor_url, '' delegation,
			       te.creator_person_member_name_ creator_person_member_name,
			       te.creator_full_id_ creator_full_id,
			       te.executor_full_id_ executor_full_id,
			       te.executor_names_ executor_names, te.status_id_ status_id,
			       te.status_name_ status_name, te.catalog_id_ catalog_id,
			       te.executor_person_member_name_ executor_person_member_name,
			       te.previous_id_ previous_id,te.business_key_ as biz_Id, te.business_code_ as biz_code,
			       te.PROC_UNIT_HANDLER_ID_ as proc_unit_handler_id
			  from act_hi_taskinst t, act_hi_taskinst_extension te
			 where t.id_ = te.id_
			   and t.id_ = ?
			   and te.id_ = ?	
		</sql>
		<sql name="selectCollectTask">
			select t.id_ id, t.proc_inst_id_ proc_inst_id, t.proc_def_id_ proc_def_id,
			       name_ name,
			       (select p.key_ from act_re_procdef p where p.id_ = t.proc_def_id_) process_definition_key,
			       parent_task_id_ parent_task_id, description_ description,
			       te.creator_ogn_name_ creator_ogn_name,
			       te.creator_dept_name_ creator_dept_name, t.task_def_key_ task_def_key,
			       t.owner_ owner, t.assignee_ assignee, t.priority_ priority,
			       t.start_time_ start_time, t.end_time_ end_time, t.due_date_ due_date,
			       '' suspension_state, te.kind_id_ kind_id, te.creator_url_ creator_url,
			       te.executor_url_ executor_url, '' delegation,
			       te.creator_person_member_name_ creator_person_member_name,
			       te.creator_full_id_ creator_full_id,
			       te.executor_full_id_ executor_full_id,
			       te.executor_names_ executor_names, te.status_id_ status_id,
			       te.status_name_ status_name, te.catalog_id_ catalog_id,
			       te.executor_person_member_name_ executor_person_member_name,
			       te.previous_id_ previous_id,te.business_key_ as biz_Id, te.business_code_ as biz_code,
			       te.proc_unit_handler_id_ as proc_unit_handler_id,
			       pie.applicant_person_member_id_ applicant_person_member_id, pie.applicant_person_member_name_ applicant_person_member_name,
			       pie.applicant_dept_name_ applicant_dept_name,
			       pie.applicant_ogn_name_ applicant_ogn_name
			  from act_hi_taskinst t, act_hi_taskinst_extension te 
			  left join act_hi_procinst_extension pie
			    on te.business_key_ = pie.business_key_ , sys_person_task_collect pc
			 where t.id_ = te.id_
			 	and t.id_ = pc.task_id
		</sql>
		<sql name="selectCompletedHiTaskinstByPreviousId">
			select t.id_
			  from act_hi_taskinst t, act_hi_taskinst_extension te
			 where t.id_ = te.id_
			   and t.proc_inst_id_ = ?
			   and te.previous_id_ = ?
			   and te.status_id_ not in ('ready', 'sleeping')
		</sql>
		<sql name="selectCompletedHiTaskinstByProcInstIdAndTaskId">
			select t.id_
			  from act_hi_taskinst t, act_hi_taskinst_extension te
			 where t.id_ = te.id_
			   and t.proc_inst_id_ = ?
			   and t.id_ = ?
			   and te.status_id_ not in ('ready', 'sleeping')
		</sql>
		<sql name="selectHiTaskinstByTaskId">
			select t.proc_inst_id_ proc_inst_id, t.task_def_key_ task_def_key,
			       t.name_ name, t.description_ description,
			       te.executor_url_ executor_url, te.status_id_ status_id,
			       te.business_key_  business_key, te.business_code_ business_code,te.need_timing_ need_timing
			  from act_hi_taskinst t, act_hi_taskinst_extension te
			 where t.id_ = te.id_
			   and t.id_ = ?
		</sql>
		<sql name="selectApprovalHistoryListByBizId">
			select t.task_def_key_ task_def_key, t.id_ id, t.name_ name, 
			       th.executor_ogn_name_ || '.' || th.executor_dept_name_  ||  '.' || th.executor_person_member_name_ handler,
			       th.catalog_id_ catalog_id, th.kind_id_ task_kind,
			       t.start_time_ start_time, t.end_time_ end_time, round(t.duration_  / (60 * 60 * 1000), 2) duration,
			       th.status_id_ status_id, th.status_name_ status_name, th.executor_ogn_name_ || '.' || executor_dept_name_ || '.' ||
                   executor_person_member_name_ executor_full_name, th.proc_unit_handler_id_, uh.approval_rule_handler_id, uh.approval_rule_id,
                   th.opinion_ opinion, th.result_ result
			  from act_hi_taskinst t, act_hi_taskinst_extension th, wf_procunithandler uh
			 where th.business_key_ = ?
			   and t.id_ = th.id_
			   and th.proc_unit_handler_id_ = uh.id(+)
			 order by t.id_
		</sql>
		<!-- 过期 -->
		<sql name="selectApprovalHistoryListByProcInstId">
			select t.task_def_key_ task_def_key, t.id_ id, t.name_ name,
			       th.executor_ogn_name_ executor_ogn_name,
			       th.executor_dept_name_ executor_dept_name,
			       th.executor_person_member_name_ executor_person_member_name,
			       t.start_time_ start_time, t.end_time_ end_time,
			       round(t.duration_ / (60 * 60 * 1000), 2) duration,
			       th.status_id_ status_id, th.status_name_ status_name,
			       th.executor_ogn_name_ || '.' || executor_dept_name_ || '.' ||
			        executor_person_member_name_ executor_full_name,
			       th.proc_unit_handler_id_, uh.approval_rule_handler_id,
			       uh.approval_rule_id, uh.group_id
			  from act_hi_taskinst t, act_hi_taskinst_extension th,
			       wf_procunithandler uh
			 where t.proc_inst_id_ = ?
			   and t.id_ = th.id_
			   and th.proc_unit_handler_id_ = uh.id(+)
			 order by t.id_
		</sql>
		<sql name="selectBackTasksByBizCode">
				select t.id_ id, t.task_def_key_ task_def_key, name_ name,
				       te.executor_ogn_name_ || '.' || te.executor_dept_name_ || '.' ||
				        te.executor_person_member_name_ executor_full_name,
				       te.status_name_ status_name, nvl(p.group_id, 0) group_id, te.previous_id_,
				       te.proc_unit_handler_id_ proc_unit_handler_id
				  from act_hi_taskinst_extension te
				  left join act_hi_taskinst t
				    on te.id_ = t.id_
				  left join wf_procunithandler p
				    on t.task_def_key_ = p.proc_unit_id
				   and te.proc_unit_handler_id_ = p.id
				   and p.biz_code = ?
				 where te.business_code_ = ?
				   and te.status_id_ in ('completed')
				   and te.kind_id_ in ('task')
				 order by t.id_
		</sql>
		<sql name="selectApplyTaskIdByBizId">
			select a.id_
			  from act_hi_taskinst_extension t, act_hi_taskinst a
			 where t.business_key_ = ?
			   and t.id_ = a.id_
			   and a.task_def_key_ = 'Apply'
		</sql>
		<sql name="selectHiTaskInstByBizCode">
			select t.id_ id, t.proc_def_id_ proc_def_id, t.task_def_key_ task_def_key,
			       t.proc_inst_id_ proc_inst_id, t.execution_id_ execution_id,
			       t.name_ name, t.description_ description, t.start_time_ start_time,
			       t.end_time_ end_time, t.priority_ priority, t.form_key_ form_key,
			       te.catalog_id_ catalog_id, te.kind_id_ kind_id,
			       te.creator_full_name_ creator_full_name,       
			       te.creator_ogn_id_ creator_ogn_id,
			       te.creator_ogn_name_ creator_ogn_name,
			       te.creator_dept_id_ creator_dept_id,
			       te.creator_dept_name_ creator_dept_name,
			       te.creator_person_member_id_ creator_person_member_id,
			       te.creator_person_member_name_ creator_person_member_name,
			       te.executor_full_name_ executor_full_name,
			       te.executor_ogn_id_ executor_ogn_id,
			       te.executor_ogn_name_ executor_ogn_name,
			       te.executor_dept_id_ executor_dept_id,
			       te.executor_dept_name_ executor_dept_name,
			       te.executor_person_member_id_ executor_person_member_id,
			       te.executor_person_member_name_ executor_person_member_name,
			       te.status_id_ status_id, te.status_name_ status_name, te.business_code_ biz_code,
			       te.executor_url_ executor_url, te.business_key_  biz_id, te.proc_unit_handler_id_ proc_unit_handler_id,
			       te.need_timing_ need_timing
			  from act_hi_taskinst_extension te, act_hi_taskinst t
			 where te.business_code_ = ?
			   and t.id_ = te.id_
			 order by t.start_time_
		</sql>
		<sql name="selectTrackingTask">
			select t.description_ description, t.proc_inst_id_ proc_inst_id, t.id_,
			       t.task_def_key_ task_def_key, t.name_ as name, 
			       t.catalog_id_ catalog_id, t.kind_id_ kind_id,
			       t.creator_person_member_id_ creator_person_member_id,
			       t.creator_person_member_name_ creator_person_member_name,
			       t.start_time_ start_time, t.executor_url_ executor_url,
			       t.status_id_ status_id, t.status_name_ status_name, t.business_code_ biz_code,
			       p.business_key_ biz_id, p.proc_sys_name
			  from  v_act_hi_task t, v_act_hi_procinst p
			 where  t.proc_inst_id_ = p.proc_inst_id_
			   and t.task_def_key_ = 'Apply'
			   and p.end_time_ is null
			   and t.previous_id_ is null
			   and t.status_id_ = 'completed'
			   and t.executor_person_member_id_ like :personId
		</sql>
	</entity>
	<entity name="hiTaskinstRelation" label="任务关联" table="ACT_HI_TASKINST_RELATION">
		<id column="ID" name="id" type="java.lang.Long" length="22" sequence="SEQ_ID"/>
		<property column="CREATE_TIME" name="createTime" type="java.util.Date" length="7" required="false" label="创建时间" />
		<property column="CREATOR_ID" name="creatorId" type="java.lang.String" length="65" required="false" label="创建人ID" />
		<property column="CREATOR" name="creator" type="java.lang.String" length="32" required="false" label="创建人" />
		<property column="BIZ_ID" name="bizId" type="java.lang.Long" length="22" required="false" label="业务ID" />
		<property column="PROC_INST_ID" name="procInstId" type="java.lang.Long" length="22" required="false" label="流程实例ID" />
		<property column="TASK_ID" name="taskId" type="java.lang.Long" length="22" required="false" label="任务ID" />
		<property column="RELATED_TASK_ID" name="relatedTaskId" type="java.lang.Long" length="22" required="false" label="关联任务ID" />
		<!-- 
			<property column="RELATED_BIZ_ID" name="relatedBizId" type="java.lang.Long" length="22" required="false" label="关联业务ID" />
			<property column="RELATED_PROC_INST_ID" name="relatedProcInstId" type="java.lang.Long" length="22" required="false" label="关联流程ID" />
			<property column="RELATED_TASK_ID" name="relatedTaskId" type="java.lang.Long" length="22" required="false" label="关联任务ID" />
			<property column="RELATED_TASK_URL" name="relatedTaskUrl" type="java.lang.String" length="256" required="false" label="关联任务URL" />
			<property column="RELATED_PROC_DEF_KEY" name="relatedProcDefKey" type="java.lang.String" length="64" required="false" label="关联流程定义Key"/>
			<property column="RELATED_PROC_UNIT_HANDLER_ID" name="relatedProcUnitHandlerId" type="java.lang.Long" length="22" required="false" label="关联任务处理人ID" />
			<property column="RELATED_TASK_DESCRIPTION" name="relatedTaskDescription" type="java.lang.String" length="1024" required="false" label="主题" />
			-->
		<sql-query>
		  select r.task_id,
			       r.related_task_id,
			       t.proc_inst_id_ proc_inst_id,
			       t.name_ as name,
			       (select p.key_ from act_re_procdef p where p.id_ = t.proc_def_id_) process_definition_key,
			       t.task_def_key_ task_def_key,
			       t.description_ description,
			       te.creator_ogn_name_ creator_ogn_name,
			       te.creator_dept_name_ creator_dept_name,
			       te.kind_id_ kind_id,
			       te.executor_url_ executor_url,
			       te.creator_person_member_name_ creator_psm_name,
			       te.executor_names_ executor_names,
			       te.status_id_ status_id,
			       te.status_name_ status_name,
			       te.catalog_id_ catalog_id,
			       te.executor_person_member_name_ executor_psm_name,
			       te.previous_id_ previous_id,
			       te.business_key_ as biz_Id,
			       t.start_time_ start_time,
			       t.end_time_ end_time,
			       te.business_code_ as biz_code,
			       te.proc_unit_handler_id_ as proc_unit_handler_id
			  from act_hi_taskinst_relation  r,
			       act_hi_taskinst_extension te,
			       act_hi_taskinst           t
			 where r.related_task_id = te.id_
			   and te.id_ = t.id_
		</sql-query>
		<condition column="BIZ_ID" name="bizId" symbol="=" alias="r"/>
		<condition column="TASK_ID" name="taskId" symbol="=" alias="r"/>
	</entity>
	<entity name="hiProcinstExtension" label="历史流程实例扩展" table="ACT_HI_PROCINST_EXTENSION">
		<id column="ID_" name="id" type="java.lang.Long" length="22" sequence="SEQ_ID"/>
		<property column="PROC_INST_ID_" name="procInstId" type="java.lang.Long" length="22" required="false" label="流程实例ID" />
		<property column="BUSINESS_KEY_" name="businessKey" type="java.lang.Long" length="22" required="false" label="任务ID" />
		<property column="APPLICANT_PERSON_MEMBER_ID_" name="applicantPersonMemberId" type="java.lang.String" length="65" required="false" label="申请人人ID"/>
		<property column="APPLICANT_PERSON_MEMBER_NAME_" name="applicantPersonMemberName" type="java.lang.String" length="128" required="false" label="申请人"/>
		<property column="APPLICANT_POS_ID_" name="applicantPosId" type="java.lang.String" length="65" required="false" label="申请人岗位ID"/>
		<property column="APPLICANT_POS_NAME_" name="applicantPosName" type="java.lang.String" length="128" required="false" label="申请人岗位"/>
		<property column="APPLICANT_DEPT_ID_" name="applicantDeptId" type="java.lang.String" length="65" required="false" label="申请人部门ID"/>
		<property column="APPLICANT_DEPT_NAME_" name="applicantDeptName" type="java.lang.String" length="128" required="false" label="申请人部门"/>
		<property column="APPLICANT_OGN_ID_" name="applicantOgnId" type="java.lang.String" length="65" required="false" label="申请人机构ID"/>
		<property column="APPLICANT_OGN_NAME_" name="applicantOgnName" type="java.lang.String" length="128" required="false" label="申请人机构"/>
		<property column="APPLICANT_FULL_ID_" name="applicantFullId" type="java.lang.String" length="1024" required="false" label="申请人ID全路径"/>
		<property column="APPLICANT_FULL_NAME_" name="applicantFullName" type="java.lang.String" length="1024" required="false" label="申请人名称全路径"/>
	</entity>	
</domain>
